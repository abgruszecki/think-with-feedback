<think>
Okay, let's try to solve this problem. So, the task is to find all possible digits d (from 0 to k-1) such that there exists a combination of the given banknotes (used any number of times) whose sum modulo k is equal to d. Then, Natasha can make the Martians happy if their divine digit is one of these d's.

Hmm, the first thing that comes to mind is that the problem is about finding all possible remainders modulo k that can be formed by the sum of multiples of the given a_i's. Each a_i can be used any number of times, including zero. So, this is similar to a subset sum problem but with unlimited repetitions and modulo k.

Wait, but with unlimited repetitions. So for each a_i, since we can add it any number of times, the contribution of a_i to the sum's modulo k is (m * (a_i mod k)) mod k, where m is the number of times we take it. But since m can be any non-negative integer, the possible contributions from a_i's modulo k are the multiples of (a_i mod k) in the additive group modulo k.

Wait, right. For example, if a_i mod k is x, then adding it m times would contribute (m * x) mod k. But since m can vary, the possible contributions from this a_i are all multiples of the greatest common divisor (gcd) of x and k. Because the set { m*x mod k | m ≥0 } is equal to the set of multiples of d, where d = gcd(x, k). So, the possible residues from this a_i are the residues that are multiples of d, where d is gcd(x, k). Because x can be written as d * x', and k is d * k', where x' and k' are coprime. So m*x mod k would be d*(m*x' mod k'), but since x' and k' are coprime, m*x' mod k' can take any value from 0 to k'-1. So the residues are 0, d, 2d, ..., (k'-1)*d mod k. Which is all multiples of d up to k.

So each a_i's mod k gives us a possible step of gcd(a_i mod k, k). Then, the problem reduces to finding the set of all possible residues that can be formed by adding any combination of these steps (using each step any number of times). The overall possible residues would be the additive combinations of all these steps modulo k. The minimal residue set is the additive subgroup generated by all the individual steps.

So the key here is to compute the greatest common divisor of all the individual steps (the d_i = gcd(a_i mod k, k)), and then the overall possible residues are the multiples of the gcd of all these d_i's. Because the sum of multiples of d_1, d_2, ... d_n is a multiple of the gcd of all d_i's. And since the steps can be combined, the overall possible residues are exactly the multiples of the gcd.

Wait, let's think again. Suppose the individual steps are d_1, d_2, ..., d_n. Then, the residues we can form are the linear combinations (with coefficients in non-negative integers) of these d_i's modulo k. The set of all such residues is the same as the additive subgroup generated by the d_i's. The generator of this subgroup is the gcd of all the d_i's and k. So the possible residues are all multiples of the overall_gcd, where overall_gcd is the gcd of all the d_i's (and since each d_i is a divisor of k, the overall_gcd will be a divisor of k). Then, the possible residues are 0, overall_gcd, 2*overall_gcd, ..., up to k - (overall_gcd - 1) * overall_gcd, but modulo k. So the total number of possible residues is k / overall_gcd.

So the first thing we need to do is compute for each a_i, its remainder modulo k. Then compute the gcd of each of these remainders with k. Then compute the gcd of all these values. Let's call this overall_gcd. Then, the possible d's are all multiples of overall_gcd modulo k. So the answer is all numbers 0, g, 2g, ..., (k/g -1)*g, where g is the overall_gcd.

So the steps for the solution are:

1. Compute for each a_i, a_i mod k. If any a_i mod k is 0, then it contributes a step of 0 (since 0 is already a multiple of any g). But since 0 can be added any number of times (but since sum mod k is 0, it doesn't affect the sum). So including a 0 in the a_i's allows the sum to be 0 modulo k. But the individual steps would have d_i = gcd(0, k) = k. Wait, no. Wait, for a_i mod k is 0, then the remainder is 0. So the gcd of 0 and k is k. So the step for that a_i is k. But when you take that into the set of d_i's, the overall_gcd would be the gcd of all d_i's. So if there's a 0 in a_i mod k, then d_i is k, so the overall_gcd would be gcd(gcd_others, k). But since k is the maximum possible divisor here, the overall_gcd would be the gcd of the previous steps and k. For example, if there's at least one a_i mod k is 0, then the d_i for that a_i is gcd(0, k) = k. Then, the overall_gcd is the gcd of all the d_i's. Since one of the d_i's is k, then the overall_gcd would be the gcd of k and the other d_i's. But since all d_i's are divisors of k (because d_i is the gcd of a_i mod k and k), so the overall_gcd would be the gcd of all d_i's, which is the same as the gcd of all d_i's except k, since k is a multiple of those. Wait, no. Let's think: suppose we have a d_i = k (from a_i mod k =0). Then the other d_i's are divisors of k. The gcd of all d_i's, including k, would be the gcd of k and the other d_i's. But since each of the other d_i's divides k, their gcd with k is the d_i. So the overall_gcd would be the gcd of all the d_i's except the k, and then take that gcd with k. But that's the same as the gcd of all the d_i's except the k. Because, for example, if other d_i's are g, then the overall_gcd would be gcd(g, k) = g, since g divides k. So including a d_i of k (from a_i mod k=0) doesn't change the overall_gcd.

Wait, maybe I should think of it this way: the overall_gcd is the greatest common divisor of all the d_i's. Each d_i is gcd(a_i mod k, k). So for a_i mod k =0, d_i is gcd(0, k) =k. Then, the overall_gcd is the gcd of all these d_i's. For example, if any of the d_i's is k, then the overall_gcd would be the gcd of all other d_i's and k. But since all other d_i's are divisors of k, their gcd with k is their own value. So, if there's a d_i of k, then the overall_gcd is the gcd of the other d_i's. Because the overall_gcd is the gcd of all d_i's, which is the same as the gcd of (k, d1, d2, ..., dn). But since k is the maximum possible divisor here, and all d_i's divide k, the overall_gcd is the same as the gcd of all d_i's except k. Wait, no. Let's take an example. Suppose there are two d_i's: 2 and 4, and k is 8. Then the overall_gcd is 2. Now, if there's another d_i of 8 (from a_i mod 8 =0), then the overall_gcd is gcd(2,4,8) which is 2. So adding a d_i of 8 doesn't change the overall_gcd. Another example: if existing d_i's are 3 and 6, and k is 12. The overall_gcd is 3. If we add a d_i of 12 (from a_i mod 12=0), the overall_gcd is 3. So including a d_i of k (the maximum possible) doesn't affect the overall_gcd, because it's a multiple of the existing d_i's. So the presence of a_i's that are multiples of k (i.e., a_i mod k=0) does not change the overall_gcd. So in code, even if we have such a_i's, their contribution to the overall_gcd is already accounted for by the existing d_i's.

Therefore, the correct approach is to compute each d_i as gcd(a_i mod k, k), then compute the overall_gcd of all d_i's. Then, the possible d's are the multiples of this overall_gcd modulo k. For example, if the overall_gcd is g, then the possible residues are 0, g, 2g, ..., up to (k/g -1)*g. These are all distinct modulo k and form the complete set of possible residues.

So the steps for solving the problem are:

1. Read n and k.

2. Read the array a of size n.

3. For each a_i, compute a_i mod k. If this mod is 0, then d_i is k. Wait, no. Wait, for a_i mod k being 0, then the gcd of 0 and k is k. So d_i is k.

Wait, gcd(0, k) is k, yes. So for a_i mod k=0, d_i is k. But when we compute the overall_gcd of all d_i's, this will include these d_i's. But since k is a divisor of itself, but the other d_i's (from a_i mod k not zero) are divisors of k. So the overall_gcd will be the gcd of all the d_i's, which includes k (for a_i mod k=0). For example, suppose k is 8, and there's an a_i with mod 0. So d_i is 8. Then the overall_gcd is the gcd of 8 and other d_i's. But other d_i's are divisors of 8, so their gcd with 8 is the d_i. So the overall_gcd would be the minimum among all d_i's, but not exactly. For example, if other d_i's are 4 and 2, then the overall_gcd would be 2. Because 2 is the gcd of 8,4,2. So even if a_i mod k is zero, which contributes d_i=8, the overall_gcd is determined by the other d_i's. So including a d_i of k (from a_i mod k=0) doesn't affect the overall_gcd, because the overall_gcd is the gcd of all d_i's, and adding k to the list (since k is a multiple of all other d_i's) doesn't change the gcd. For example, if existing d_i's are 4 and 2, then the gcd is 2. Adding a d_i of 8 (which is a multiple of 2 and 4) gives the same gcd of 2.

So in code:

Compute all d_i's as gcd(a_i mod k, k). Then compute the overall_gcd as the gcd of all d_i's.

Once we have the overall_gcd (g), the possible residues are all multiples of g modulo k. These residues are 0, g, 2g, 3g, ..., up to (k/g -1)*g. Because after that, adding another g would wrap around (since (k/g)*g =k ≡0 mod k). So the number of possible residues is k/g.

But wait, how do we generate these residues?

For example, if k=8 and g=2, the residues are 0,2,4,6.

If k=8 and g=4, residues are 0,4.

So, to generate all possible d's in the required order, we can start from 0 and add g each time modulo k. But since k is a multiple of g, the numbers generated are 0, g, 2g, ..., ( (k/g -1) * g ). So the total count is k/g.

So the steps are:

- Compute all d_i = gcd(a_i % k, k).

- Compute g = gcd of all d_i's.

- The answer is all multiples of g in [0, k), i.e., 0, g, 2g, ..., ( (k/g -1)*g )

- Sort them in increasing order.

But wait, what if there are no a_i's? Wait, the problem says n >=1. So no, n is at least 1.

Wait, in the constraints, n can be 1 to 1e5. So if n is 1, then the d_i is the gcd(a_i mod k, k), and the overall_gcd is d_i. Then the residues are multiples of d_i.

But in code:

For example, in the first sample input:

n=2, k=8

a =12, 20.

Compute a_i mod k: 12 mod8 is 4, 20 mod8 is 4.

Each d_i is gcd(4,8) =4. So overall_gcd is 4.

So possible residues are 0,4. Which matches the sample output.

In the second sample input:

n=3, k=10.

a =10, 20, 30.

Each a_i mod 10 is 0,0,0. So d_i's are 10,10,10. So overall_gcd is 10. Then possible residues are 0 (since 10 divides 10, so k/g is 1. So only 0).

Which matches the sample.

Another example: suppose n=1, k=5, a_i=3.

a_i mod5 is 3. d_i = gcd(3,5)=1.

So overall_gcd is 1. Then possible residues are 0,1,2,3,4. So all digits are possible. So output is 5 numbers, 0,1,2,3,4.

So in code, the process is:

Calculate all the d_i's, compute their gcd, then generate all multiples of that gcd modulo k, sorted.

Now, how to compute the gcd of all d_i's efficiently?

We can initialize g as 0, then for each d_i, compute g = gcd(g, d_i). Because the gcd of a list of numbers can be computed incrementally.

Wait, yes. Because gcd(a, b, c) = gcd(gcd(a, b), c).

So in code:

g = 0

for each a_i in a:

    mod = a_i % k

    di = math.gcd(mod, k)

    g = math.gcd(g, di)

But wait, initializing g as 0 may not be correct. Because initially, when there are no elements, the gcd is 0, but once you add the first di, the gcd becomes di. Then for each subsequent di, it's gcd of the previous g and di.

Yes. For example, first di is 4. Then g becomes gcd(0,4) which is 4. Then next di is 4: gcd(4,4) is 4. So it works.

So, code steps:

Read n, k.

Read a array.

Compute for each a_i:

mod = a_i % k

di = gcd(mod, k)

Compute overall_gcd as the gcd of all di's.

Then, if overall_gcd is 0 (but in practice, when k >=2, and mod can be zero, di is k. So overall_gcd can't be 0. Because di is always at least 1? Wait, because k >=2, and di is gcd(mod, k), where mod is a_i mod k, which is 0<=mod <k. So if mod is 0, then di is gcd(0, k) =k. Which is >=2 (since k >=2). If mod is non-zero, then di is gcd(mod, k), which is at least 1. So the overall_gcd is at least 1. So no problem.

Once we have overall_gcd (g), then the possible residues are 0, g, 2g, ..., ( (k//g -1) * g )

So the list is [x * g for x in range(0, k//g)].

Because each x from 0 to (k//g -1) gives a distinct residue, since k//g is the maximum possible steps before it wraps around.

So for example, k=8, g=4: 0,4. Since 8//4=2, x ranges 0 to 1.

For k=8, g=2: 0,2,4,6. 8//2=4, x ranges 0-3.

So the code for generating the list is:

d_values = [x * g for x in range(k//g)]

But wait, when k is divided by g exactly. For example, when k=5, g=1, then k//g is 5. So x ranges 0-4, multiply by 1 gives 0,1,2,3,4. Which are all possible residues mod5.

Yes.

So the code:

g = 0

for number in a:

    mod = number % k

    di = math.gcd(mod, k)

    g = math.gcd(g, di)

Then, the possible d's are [i * g for i in range(k//g)]

But wait, no: for example, when k=8 and g=4, then k//g is 2. So i runs from 0 to 1, which gives 0*4=0 and 1*4=4. Which is correct.

Another example: if k=6 and g=3. Then k//g is 2. So 0*3=0, 1*3=3. Which are the possible residues.

Yes.

So the code for the possible d's is correct.

Once the list is generated, we need to output the count, then the sorted list. But wait, the list is already in sorted order because the multiples are generated from 0 in steps of g. Since g is a divisor of k, the multiples are in increasing order. For example, 0, 4, 8 (but mod k=8, 8 is 0). Wait, no: when we generate [x * g for x in range(k//g)], since x is up to (k//g -1). So x*g is (k//g -1)*g = k -g. For example, k=8, g=4: (8//4 -1)*4 = (2-1)*4=4. So the list is 0,4. Which is correct.

So the list is in order 0, g, 2g, ..., which is sorted in increasing order.

So no need to sort again. Because when you multiply by x in 0,1,2, etc., the result is in order.

Wait, if g is 3 and k=9. Then the list is 0,3,6. Which is sorted.

Yes. So the list is already in order. So we can directly output the list.

But wait, what if g=0? But earlier analysis said that g can't be zero because all d_i's are >=1. So the list is generated correctly.

So the code is:

Compute g as the gcd of all d_i's.

Generate the list as [i * g for i in range(k // g)].

Then, output the length of the list, followed by the elements in the list.

So the Python code would be:

import math

n, k = map(int, input().split())

a = list(map(int, input().split()))

g = 0

for num in a:

    mod = num % k

    di = math.gcd(mod, k)

    g = math.gcd(g, di)

if g ==0:  # but this can't happen because k >=2 and di >=1, so g >=1.

    print(0)

else:

    count = k // g

    divisors = [i * g for i in range(count)]

    print(len(divisors))

    print(' '.join(map(str, divisors)))

But wait, what if g is zero? But according to our previous reasoning, since all d_i's are at least 1 (since k >=2), the initial g starts at 0, but after the first iteration, g becomes the first di (which is >=1). So g can't be zero. So the 'if g ==0' clause is unnecessary, but it's there just for safety.

Testing this code with the first sample input:

Sample input 1:

2 8

12 20

mod is 12%8=4, di = gcd(4,8)=4. Then next a_i is 20 mod8=4, di=4. Then g = gcd(0,4) =4, then gcd(4,4)=4. So g=4.

count is 8//4=2. divisors are [0,4]. Output is 2, then 0 4. Correct.

Sample input 2:

3 10

10 20 30

Each a_i mod10 is 0. di for each is 10. So the overall_gcd is 10. Then count is 10//10=1. divisors is [0]. Correct.

Another test case where g=1 and k=5: the list is 0,1,2,3,4. Output is 5 numbers.

So the code works.

Now, what about the case where some a_i's mod k=0? For example, a_i is 8, k is 8. Then di is 8. So the overall_gcd is 8. So count is 8//8=1. divisors is [0]. So output is 0.

But what if there's another a_i with mod 4, and k=8. Then di for that a_i is 4. So the overall_gcd is gcd(8,4) =4. So count is 8//4=2. divisors are 0,4. So even though there's a di of 8 (from a_i mod8=0), the overall_gcd is 4, which is the gcd of 8 and 4.

So code correctly handles that.

So the code seems correct.

Now, edge cases: when k=2, and a_i is 1. Then mod is 1, di is gcd(1,2)=1. overall_gcd is 1. So possible residues are 0,1. So output is 2 numbers.

Yes.

Another edge case: k=1. But according to the constraints, k is at least 2. So no need to handle k=1.

So the code should handle all cases correctly.

Now, considering the constraints.

The code's time complexity is O(n log k), because for each of the n elements, we compute a mod k (O(1)), and compute gcd (O(log k) time). Then, the overall_gcd is computed in O(n) steps. So the time complexity is O(n log k), which is acceptable for n=1e5 and k=1e5.

The memory is O(1), as we only store the variables. The input is read as a list, but that's unavoidable.

So the code is efficient and passes all test cases.
</think>

```python
import math

n, k = map(int, input().split())
a = list(map(int, input().split()))

g = 0
for num in a:
    mod = num % k
    di = math.gcd(mod, k)
    g = math.gcd(g, di)

count = k // g
divisors = [i * g for i in range(count)]

print(len(divisors))
print(' '.join(map(str, divisors)))
```